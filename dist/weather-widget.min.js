/*
 * jQuery Weather Widget
 * 2015 Matt O'Connell <mattoconnell408@gmail.com> 
 * License: MIT
 */
 
!function(a,b){"use strict";var c=function(b,c){var e=this;e.$el=a(b).addClass("weather-widget"),e.defaults=d,e.init=function(){e.pollAPI(c,e.makeWidget)},e.defaults.geoLocate&&"undefined"!=typeof geoLite&&geoLite.locateOnLoad?(document.body.addEventListener("onLocateSuccess",function(){var b={lat:geoLite.lat,lon:geoLite.lon};c=a.extend(c,b),e.init()}),document.body.addEventListener("onLocateFail",function(){e.init()})):e.init()},d={lat:"40.748441",lon:"-73.985793",url:"https://api.forecast.io/forecast/",key:"50efc01999c6c329ae64ade7449047fe",cacheTime:30,geoLocate:!0,celsius:!1},e=function(a){return Math.round(5*(a-32)/9)};c.prototype.makeURL=function(a){return a.url+a.key+"/"+a.lat+","+a.lon},c.prototype.pollAPI=function(c,e){var f=this,c=a.extend(d,c),g=f.makeURL(c),h=b?b.get(g,c.cacheTime):!1;return f.options=c,h?(e.call(f,h),!1):void a.ajax({dataType:"jsonp",url:g,success:function(a){b&&b.set(g,a),e&&e.call(f,a)},error:function(a){console.log(a)}})};var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];c.prototype.makeWidget=function(b){for(var d=this instanceof c&&this.options.celsius?!0:!1,g=b.currently,h=b.hourly.data,i=b.daily.data,j=this,k=a('<div class="header"><span>'+Math.round(d?e(g.temperature):g.temperature)+"&deg;</span><span>"+g.summary+'</span><span class="icon '+g.icon+'"></span></div>'),l=a('<div class="hourly"></div>'),m=a('<div class="daily"></div>'),n=0;5>n;n++){var o=Math.round(h[n+1].temperature),p=h[n+1].icon,q=(new Date).getHours()+n,r=q>=12?"pm":"am";o=d?e(o):o,q>23&&(q=Math.abs(23-q),r="am"),q%=12,q=q?q:12,l.append(a('<div><span class="time">'+q+r+'</span><span class="icon '+p+'"></span><span class="temp">'+o+"&deg;</span></div>"))}m.append(a('<div class="daily-title"><span>7 Day Forecast</span><span>High</span><span>Low</span></div>'));for(var s=0;7>s;s++){var t=f[new Date(1e3*i[s+1].time).getDay()],p=i[s+1].icon,u=Math.round(i[s+1].temperatureMax),v=Math.round(i[s+1].temperatureMin);u=d?e(u):u,v=d?e(v):v,m.append(a('<div><span class="day">'+t+'</span><span class="icon '+p+'"></span><span class="max">'+u+'&deg;</span><span class="min">'+v+"&deg;</span></div>"))}var w=a('<span class="less">Less</span>');m.append(w),w.click(function(){m.removeClass("active")}),m.find(".daily-title:first-child").click(function(){console.log("wtf"),m.addClass("active")});var x=j.$el.append(k).append(l).append(m);j.$el.append(x)},a.fn.weatherWidget=function(a){return this.each(function(){new c(this,a)})},a.extend({weatherWidget:c.prototype})}(jQuery,"undefined"!=typeof lsLite?lsLite:null);
//# sourceMappingURL=weather-widget.min.js.map