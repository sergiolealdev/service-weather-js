/*
 * jQuery Weather Widget
 * 2015 Matt O'Connell <mattoconnell408@gmail.com> 
 * License: MIT
 */
 
!function(a,b){"use strict";var c=function(b,c){var e=this;e.$el=a(b).addClass("weather-widget"),e.defaults=d,e.init=function(){e.pollAPI(c,e.makeWidget)},e.defaults.geoLocate&&"undefined"!=typeof geoLite&&geoLite.locateOnLoad?(document.body.addEventListener("onLocateSuccess",function(){var b={lat:geoLite.lat,lon:geoLite.lon};c=a.extend(c,b),e.init()}),document.body.addEventListener("onLocateFail",function(){e.init()})):e.init()},d={lat:"40.748441",lon:"-73.985793",url:"https://api.forecast.io/forecast/",key:"50efc01999c6c329ae64ade7449047fe",cacheTime:30,geoLocate:!0,celsius:!1},e=function(a){return Math.round(5*(a-32)/9)};c.prototype.makeURL=function(a){return a.url+a.key+"/"+a.lat+","+a.lon},c.prototype.pollAPI=function(c,e){var f=this,c=a.extend(d,c),g=f.makeURL(c),h=b?b.get(g,c.cacheTime):!1;return f.options=c,h?(e.call(f,h),!1):void a.ajax({dataType:"jsonp",url:g,success:function(a){b&&b.set(g,a),e&&e.call(f,a)},error:function(a){console.log(a)}})};var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];c.prototype.makeWidget=function(b){for(var d=this instanceof c&&this.options.celsius?!0:!1,g=b.currently,h=b.hourly.data,i=b.daily.data,j=this,k=Math.round(d?e(g.temperature):g.temperature),l=a('<p class="title">Local Weather</p><div class="header"><span class="icon '+g.icon+'"></span><div><span>'+k+"&deg;</span><span>"+g.summary+"</span></div></div>"),m=a('<div class="hourly"></div>'),n=a('<div class="daily"></div>'),o=0;5>o;o++){var p=Math.round(h[o+1].temperature),q=h[o+1].icon,r=(new Date).getHours()+o,s=r>=12?"pm":"am";p=d?e(p):p,r>23&&(r=Math.abs(23-r),s="am"),r%=12,r=r?r:12,m.append(a('<div><span class="time">'+r+s+'</span><span class="icon '+q+'"></span><span class="temp">'+p+"&deg;</span></div>"))}n.append(a('<div class="daily-title"><span>7 Day Forecast</span><span>High</span><span>Low</span><br></div>'));for(var t=0;7>t;t++){var u=f[new Date(1e3*i[t+1].time).getDay()],q=i[t+1].icon,v=Math.round(i[t+1].temperatureMax),w=Math.round(i[t+1].temperatureMin);v=d?e(v):v,w=d?e(w):w,n.append(a('<div><span class="day">'+u+'</span><span class="icon '+q+'"></span><span class="max">'+v+'&deg;</span><span class="min">'+w+"&deg;</span></div>"))}var x=a('<span class="less">Less</span><br>');n.append(x),x.click(function(){n.removeClass("active")}),n.find(".daily-title:first-child").click(function(){n.addClass("active")});var y=j.$el.append(l).append(m).append(n);j.$el.append(y)},a.fn.weatherWidget=function(a){return this.each(function(){new c(this,a)})},a.extend({weatherWidget:c.prototype})}(jQuery,"undefined"!=typeof lsLite?lsLite:null);
//# sourceMappingURL=weather-widget.min.js.map