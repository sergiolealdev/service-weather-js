/*
 * jQuery Weather Widget
 * 2015 Matt O'Connell <mattoconnell408@gmail.com> 
 * License: MIT
 */
 
!function(a,b){"use strict";var c=function(b,c){var e=this;e.$el=a(b).addClass("weather-widget"),e.defaults=d,e.init=function(){e.pollAPI(c,e.makeWidget)},e.defaults.geoLocate&&"undefined"!=typeof geoLite&&geoLite.locateOnLoad?(document.body.addEventListener("onLocateSuccess",function(){var b={lat:geoLite.lat,lon:geoLite.lon};c=a.extend(c,b),e.init()}),document.body.addEventListener("onLocateFail",function(){e.init()})):e.init()},d={lat:"40.748441",lon:"-73.985793",url:"https://api.forecast.io/forecast/",key:"50efc01999c6c329ae64ade7449047fe",cacheTime:30,geoLocate:!0,celsius:!1},e=function(a){return Math.round(5*(a-32)/9)};c.prototype.makeURL=function(a){return a.url+a.key+"/"+a.lat+","+a.lon},c.prototype.pollAPI=function(c,e){var f=this,c=a.extend(d,c),g=f.makeURL(c),h=b?b.get(g,c.cacheTime):!1;return f.options=c,h?(e.call(f,h),!1):void a.ajax({dataType:"jsonp",url:g,success:function(a){b&&b.set(g,a),e&&e.call(f,a)},error:function(a){console.log(a)}})};var f=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];c.prototype.makeWidget=function(b){var d=this instanceof c&&this.options.celsius?!0:!1,g=b.currently,h=b.hourly.data,i=b.daily.data,j=this,k=Math.round(d?e(g.temperature):g.temperature),l=a("<div>").addClass("widget").addClass("weather"),m=a("<header>").addClass("title"),n=a("<a>").addClass("expand").addClass("more").attr("href","#").text("7 Day Forecast");m.append(a("<h2>").addClass("name").text("Local Weather")).append(a("<span>").addClass("description").text("Current Conditions")).append(n),l.append(m);var o=a("<section>").addClass("current");o.append(a("<img>").addClass("icon").attr("src","dist/img/"+g.icon+".png")).append(a("<span>").addClass("temperature").html(k+"&deg;F")).append(a("<span>").addClass("description").text(g.summary)),l.append(o);for(var p=a("<section>").addClass("hourly"),q=a("<div>").addClass("hour").addClass("five").append(a("<span>").addClass("time")).append(a("<img>").addClass("icon")).append(a("<span>").addClass("temperature")),r=0;5>r;r++){var s=Math.round(h[r+1].temperature),t=h[r+1].icon,u=(new Date).getHours()+r,v=u>=12?"pm":"am";s=d?e(s):s,u>23&&(u=Math.abs(23-u),v="am"),u%=12,u=u?u:12;var w=q.clone();w.find(".time").text(u+v),w.find(".icon").attr("src","dist/img/"+t+".png"),w.find(".temperature").html(s+"&deg;"),p.append(w)}l.append(p);var x=a("<div>").addClass("expand-wrapper").addClass("hide"),y=a("<section>").addClass("forecasts");y.append(a("<header>").addClass("forecast").append(a("<span>").addClass("day").text("7 Day Forecast")).append(a("<span>").addClass("high").text("High")).append(a("<span>").addClass("low").text("Low")));for(var z=0;7>z;z++){var A=f[new Date(1e3*i[z+1].time).getDay()],t=i[z+1].icon,B=Math.round(i[z+1].temperatureMax),C=Math.round(i[z+1].temperatureMin);B=d?e(B):B,C=d?e(C):C,y.append(a("<div>").addClass("forecast").append(a("<span>").addClass("day").text(A)).append(a("<img>").addClass("icon").attr("src","dist/img/"+t+".png")).append(a("<span>").addClass("high").html(B+"&deg;")).append(a("<span>").addClass("low").html(C+"&deg;")))}x.append(y),l.append(x),n.on("click",function(){x.hasClass("hide")?(n.removeClass("more").addClass("less"),x.slideDown().removeClass("hide")):(n.removeClass("less").addClass("more"),x.slideUp().addClass("hide"))}),j.$el.append(l)},a.fn.weatherWidget=function(a){return this.each(function(){new c(this,a)})},a.extend({weatherWidget:c.prototype})}(jQuery,"undefined"!=typeof lsLite?lsLite:null);
//# sourceMappingURL=weather-widget.min.js.map